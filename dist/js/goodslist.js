"use strict";$(function(){for(var i=0;i<$(".cate_menu div").size();i++)$(".cate_menu div").eq(i)[0].isok=!0;$(".cate_menu div p").on("click",function(){if($(this).parent()[0].isok){$(".cate_menu div ul").slideUp();for(var i=0;i<$(".cate_menu div").size();i++)$(".cate_menu div").eq(i)[0].isok=!0;$(this).next().slideDown(),$(".cate_menu div p i").attr("class",""),$(this).children().eq(0).children().attr("class","sj")}else $(this).next().slideUp(),$(this).children().attr("class","");$(this).parent()[0].isok=!$(this).parent()[0].isok}),$(".filter_box a,.sort a").on("mouseover",function(){$(this).css("text-decoration","underline")}),$(".filter_box a,.sort a").on("mouseout",function(){$(this).css("text-decoration","none")}),$(".cpt_filter li").on("mouseover",function(){$(".cpt_filter div").eq($(this).index()).css("display","block"),$(".cpt_filter div").on("mouseover",function(){$(this).css("display","block")})}),$(".cpt_filter li").on("mouseout",function(){$(".cpt_filter div").eq($(this).index()).css("display","none"),$(".cpt_filter div").on("mouseout",function(){$(this).css("display","none")})});var t="goodsid",s="asc";function o(i,t,s,o){$.ajax({type:"get",url:"../api/goodslist.php",data:{page:i,qty:t,type:s,order:o},success:function(i){var t=JSON.parse(i);if(console.log(t),t.code){!function(i){var t=i.map(function(i){return'<li data-id="'+i.goodsid+'">\n                        <img src="../img/'+i.imgurl+'" alt="" />\n                        <a class="qitian" href="javascript:;"></a>\n                        <span class="xinpin"></span>\n                        <p class="title">'+i.title+'</p>\n                        <p class="pingjia"><i></i><em>['+i.collect+']</em></p>\n                        <p class="price">¥'+i.price+'</p>\n                        <p class="action">\n                            <a class="purchase" href="javascript:;">购买</a>\n                            <a class="collect" href="javascript:;">收藏</a>\n                            <a class="compare" href="javascript:;"><i></i>比较</a>\n                        </p>\n                    </li>'}).join("");$("#goodsData").html(t);for(var s=0;s<$(".compare").size();s++)$(".compare i").eq(s)[0].i_isok=!0}(t.list);for(var s="",o=0;o<t.sum/t.qty;o++)s+='<a href="javascript:;">'+(o+1)+"</a>";$("#total").html(s),$("#total").children().eq(t.page-1).attr("class","curr")}}})}o(1,20,t,s),$("#total").on("click","a",function(){o($(this).html(),20,t,s)}),$(".sort").on("click","a",function(){s="asc"==s?"desc":"asc",$(".sort a").css("backgroundColor","#ffffff"),$(this).css("backgroundColor","#FFF0D9"),o(1,20,t=$(this).attr("class"),s)}),$(".pageConfirm").on("click",function(){o($(this).prev().val(),20,t,s)}),$("#goodsData").on("click",".title,img",function(){var i=$(this).parent().attr("data-id");location.href="detail.html?id="+i}),$("#goodsData").on("mouseover",".compare,.collect",function(){$(this).css("border-color","#dadada")}),$("#goodsData").on("mouseout",".compare,.collect",function(){$(this).css("border-color","#838383")}),$("#goodsData").on("click",".compare i",function(){$(this)[0].i_isok?$(this).attr("class","i_all"):$(this).attr("class",""),$(this)[0].i_isok=!$(this)[0].i_isok})});